<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FSS Demo — Dashboard</title>
  <link rel="stylesheet" href="assets/app.css" />
</head>
<body class="app dark">

  <header class="topbar">
    <div class="brand">
      <div class="logo">FSS</div>
      <div>
        <div class="title">Dashboard</div>
        <div class="sub">Start a new agreement or review recent activity.</div>
      </div>
    </div>

    <nav class="navlinks">
      <a href="dashboard.html" class="active">Dashboard</a>
      <a href="create.html">Create</a>
      <a href="../../demos.html" id="logoutLink">Logout</a>
    </nav>
  </header>

  <main class="page">
    <div class="shell">

      <section class="panel">
        <h2>Welcome</h2>
        <p class="muted" id="welcomeLine">Loading...</p>

        <div class="divider"></div>

        <div class="grid2">

          <!-- Left -->
          <div class="panel" style="box-shadow:none; margin:0; padding:16px; background: rgba(0,0,0,.18);">
            <h3 class="h3">Create a new agreement</h3>
            <p class="muted" style="margin-top:6px;">
              Choose a document template, assign parties, and send to sign.
            </p>

            <div class="actions" style="margin-top:12px;">
              <a class="btn primary" href="create.html">New Agreement</a>
              <a class="btn secondary" href="create.html">New NDA</a>
            </div>

            <div class="divider"></div>

            <h3 class="h3">Available templates</h3>
            <p class="tiny muted" style="margin-top:6px;">
              These PDFs are loaded directly from <code>/pdfs/</code>
            </p>

            <ul class="muted" style="margin:10px 0 0; padding-left:18px; font-weight:800;">
              <li>NDA</li>
              <li>Consulting Agreement</li>
              <li>Lease Release</li>
              <li>Event Accident Waiver</li>
              <li>Non-Compete Release</li>
              <li>Photo Release</li>
              <li>Real Estate Mutual Release</li>
            </ul>
          </div>

          <!-- Right -->
          <div class="panel" style="box-shadow:none; margin:0; padding:16px; background: rgba(0,0,0,.18);">
            <h3 class="h3">Recent activity</h3>
            <p class="muted" style="margin-top:6px;">
              This demo simulates an audit trail and completion workflow.
            </p>

            <div class="divider"></div>

            <div style="display:grid; gap:10px;">
              <div class="hintBox">
                <b>Agreement created</b>
                <div class="muted" style="margin-top:6px;">Party A assigned, Party B invited.</div>
              </div>

              <div class="hintBox">
                <b>Signature requested</b>
                <div class="muted" style="margin-top:6px;">Recipient opened and placed fields.</div>
              </div>

              <div class="hintBox">
                <b>Completed</b>
                <div class="muted" style="margin-top:6px;">Signed PDF generated and downloaded.</div>
              </div>
            </div>

            <div class="divider"></div>

            <p class="tiny muted">
              Want this to be real (email sending + storage + audit logs)? We can connect Firebase/Supabase + email delivery.
            </p>
          </div>

        </div>

      </section>

    </div>
  </main>

  <script>
    // Auth guard
    function getAuth(){
      const raw = localStorage.getItem("fss_auth");
      try { return raw ? JSON.parse(raw) : null; } catch { return null; }
    }

    const auth = getAuth();
    if(!auth){
      window.location.href = "index.html";
    } else {
      document.getElementById("welcomeLine").textContent =
        `Signed in as ${auth.email} • Demo portal active`;
    }

    // Logout clears auth
    document.getElementById("logoutLink").addEventListener("click", () => {
      localStorage.removeItem("fss_auth");
      localStorage.removeItem("fss_doc");
      localStorage.removeItem("fss_parties");
    });
  </script>
</body>
</html>
