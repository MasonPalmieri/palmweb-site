<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WCV Premier LLC — Contact (Demo)</title>
  <meta name="description" content="Contact WCV Premier LLC — demo contact page with automation lead summary." />
  <meta name="theme-color" content="#fbfaf6" />
  <link rel="stylesheet" href="assets/style.css" />
</head>

<body>
  <header>
    <div class="container nav">
      <a class="brand" href="index.html">
        <img src="assets/wcv-logo.png" alt="WCV Premier LLC logo" />
        <div class="brand-title">
          <strong>WCV Premier LLC</strong>
          <span>Contact • Demo redesign</span>
        </div>
      </a>

      <nav aria-label="Main">
        <a href="index.html" data-page="index.html">Home</a>
        <a href="automation.html" data-page="automation.html">Automation</a>
        <a href="faq-s.html" data-page="faq-s.html">FAQ</a>
        <a href="contact.html" data-page="contact.html">Contact</a>
        <a href="terms-and-conditions.html" data-page="terms-and-conditions.html">Terms</a>
        <a href="privacy-policy.html" data-page="privacy-policy.html">Privacy</a>
      </nav>

      <div class="nav-actions">
        <a class="btn btn-outline" href="../../demos.html">Back to Demos</a>
        <a class="btn btn-primary" href="automation.html">Start Intake</a>
      </div>
    </div>
  </header>

  <main class="container hero">
    <div class="kicker"><span class="dot"></span> Get in touch</div>
    <h1 class="page-title">Contact</h1>
    <p class="lead">
      For the demo, this page shows how automation intake can pre-fill a lead summary and generate standard follow-up content.
    </p>

    <div class="contact-grid">
      <section class="card-soft">
        <div class="section-title">Message</div>

        <form class="form" id="contactForm">
          <div class="field-grid">
            <label class="field">
              <span>Name</span>
              <input id="cName" type="text" placeholder="Jane Smith" />
            </label>

            <label class="field">
              <span>Email</span>
              <input id="cEmail" type="email" placeholder="jane@email.com" />
            </label>

            <label class="field full">
              <span>Property address (optional)</span>
              <input id="cAddress" type="text" placeholder="123 Main St, Providence, RI" />
            </label>

            <label class="field full">
              <span>Message</span>
              <textarea id="cMsg" placeholder="Tell us what you’re looking for…"></textarea>
            </label>
          </div>

          <div class="row">
            <a class="btn btn-outline" href="automation.html">Use Automated Intake</a>
            <button class="btn btn-primary" type="button" id="demoSend">Demo Send</button>
          </div>

          <div class="mini-note" id="sentNote" style="display:none;">
            Demo: message captured locally (no backend). In production, this would create a CRM record + task assignment + email/SMS.
          </div>
        </form>
      </section>

      <aside class="card-soft">
        <div class="section-title">Automation lead summary</div>

        <div id="leadEmpty" class="mini-note">
          No saved lead yet. Run the <a href="automation.html" style="text-decoration:underline;">Automated Intake</a> to see auto-generated outputs here.
        </div>

        <div id="leadBox" class="leadbox" hidden>
          <div class="leadbox-head">
            <div>
              <div class="leadbox-title" id="lTitle">Lead</div>
              <div class="leadbox-sub" id="lSub">—</div>
            </div>
            <button class="btn btn-outline btn-small" type="button" id="clearLead">Clear</button>
          </div>

          <div class="leadbox-body">
            <div class="kv"><span>Priority</span><strong id="lPriority">—</strong></div>
            <div class="kv"><span>Route</span><strong id="lRoute">—</strong></div>
            <div class="kv"><span>Reason</span><strong id="lReason">—</strong></div>

            <hr class="hr" />

            <div class="kv"><span>Name</span><strong id="lName">—</strong></div>
            <div class="kv"><span>Email</span><strong id="lEmail">—</strong></div>
            <div class="kv"><span>Phone</span><strong id="lPhone">—</strong></div>
            <div class="kv"><span>Address</span><strong id="lAddr">—</strong></div>

            <hr class="hr" />

            <div class="result-title" style="margin-top:0;">Auto-generated email</div>
            <textarea class="draft" id="lDraftEmail" readonly></textarea>

            <div class="result-title" style="margin-top:10px;">Auto-generated call script</div>
            <textarea class="draft" id="lDraftScript" readonly></textarea>

            <div class="row">
              <button class="btn btn-outline" type="button" id="copyLeadEmail">Copy Email</button>
              <button class="btn btn-outline" type="button" id="copyLeadScript">Copy Script</button>
              <button class="btn btn-outline" type="button" id="exportLeadJson">Export JSON</button>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <footer>
    <div class="container">© <span id="year"></span> WCV Premier LLC • Demo redesign for PalmWeb.</div>
  </footer>

  <script src="assets/site.js"></script>
  <script>
    (function(){
      const $ = (id) => document.getElementById(id);
      const STORAGE_KEY = "wcv_demo_lead";

      const leadEmpty = $("leadEmpty");
      const leadBox = $("leadBox");

      function renderNone(){
        leadEmpty.style.display = "block";
        leadBox.hidden = true;
      }

      function loadLead(){
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return null;
        try{ return JSON.parse(raw); }catch{ return null; }
      }

      function renderLead(lead){
        if(!lead){ renderNone(); return; }

        leadEmpty.style.display = "none";
        leadBox.hidden = false;

        $("lTitle").textContent = lead.address || "Lead";
        $("lSub").textContent = lead.createdAt ? new Date(lead.createdAt).toLocaleString() : "Saved lead";

        $("lPriority").textContent = lead.automation?.qualification?.priority || "—";
        $("lRoute").textContent = lead.automation?.qualification?.route || "—";
        $("lReason").textContent = lead.automation?.qualification?.reason || "—";

        $("lName").textContent = lead.name || "—";
        $("lEmail").textContent = lead.email || "—";
        $("lPhone").textContent = lead.phone || "—";
        $("lAddr").textContent = lead.address || "—";

        $("lDraftEmail").value = lead.automation?.emailDraft || "";
        $("lDraftScript").value = lead.automation?.callScript || "";

        // Prefill contact form
        $("cName").value = lead.name || "";
        $("cEmail").value = lead.email || "";
        $("cAddress").value = lead.address || "";
        $("cMsg").value =
          `Hi WCV,\n\nI submitted an intake for ${lead.address}. Please let me know next steps.\n\nThanks,\n${lead.name || ""}`;
      }

      function downloadJson(raw){
        const blob = new Blob([raw], { type:"application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "wcv-lead.json";
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
      }

      const lead = loadLead();
      renderLead(lead);

      $("clearLead").addEventListener("click", () => {
        localStorage.removeItem(STORAGE_KEY);
        renderNone();
      });

      $("copyLeadEmail").addEventListener("click", async () => {
        try{
          await navigator.clipboard.writeText($("lDraftEmail").value || "");
          $("copyLeadEmail").textContent = "Copied!";
          setTimeout(() => $("copyLeadEmail").textContent = "Copy Email", 1200);
        }catch{
          alert("Copy failed. You can manually select and copy.");
        }
      });

      $("copyLeadScript").addEventListener("click", async () => {
        try{
          await navigator.clipboard.writeText($("lDraftScript").value || "");
          $("copyLeadScript").textContent = "Copied!";
          setTimeout(() => $("copyLeadScript").textContent = "Copy Script", 1200);
        }catch{
          alert("Copy failed. You can manually select and copy.");
        }
      });

      $("exportLeadJson").addEventListener("click", () => {
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return;
        downloadJson(raw);
      });

      $("demoSend").addEventListener("click", () => {
        $("sentNote").style.display = "block";
        $("demoSend").textContent = "Sent (demo)";
        setTimeout(() => $("demoSend").textContent = "Demo Send", 1400);
      });
    })();
  </script>
</body>
</html>
