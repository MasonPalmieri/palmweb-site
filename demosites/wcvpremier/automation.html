<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WCV Premier LLC — Automated Intake (Demo)</title>
  <meta name="description" content="Demo automation: lead intake → qualification → next steps + follow-up draft + CRM export JSON." />
  <meta name="theme-color" content="#fbfaf6" />
  <link rel="stylesheet" href="assets/style.css" />
</head>

<body>
  <header>
    <div class="container nav">
      <a class="brand" href="index.html">
        <img src="assets/wcv-logo.png" alt="WCV Premier LLC logo" />
        <div class="brand-title">
          <strong>WCV Premier LLC</strong>
          <span>Automation demo • Intake → Next steps</span>
        </div>
      </a>

      <nav aria-label="Main">
        <a href="index.html" data-page="index.html">Home</a>
        <a href="automation.html" data-page="automation.html">Automation</a>
        <a href="faq-s.html" data-page="faq-s.html">FAQ</a>
        <a href="contact.html" data-page="contact.html">Contact</a>
        <a href="terms-and-conditions.html" data-page="terms-and-conditions.html">Terms</a>
        <a href="privacy-policy.html" data-page="privacy-policy.html">Privacy</a>
      </nav>

      <div class="nav-actions">
        <a class="btn btn-outline" href="../../demos.html">Back to Demos</a>
        <a class="btn btn-primary" href="contact.html">Contact</a>
      </div>
    </div>
  </header>

  <main class="container hero">
    <div class="kicker"><span class="dot"></span> Demo automation • Static site (no backend)</div>
    <h1 class="page-title">Automated Intake</h1>
    <p class="lead">
      A common “tedious task” in this industry is chasing details, rewriting the same follow-ups,
      and manually routing leads. This demo simulates automating that: intake → qualification → next steps + email + call script.
    </p>

    <div class="automation-layout">
      <section class="wizard card-soft" aria-label="Intake wizard">
        <div class="wizard-head">
          <div>
            <div class="section-title">Guided intake</div>
            <div class="wizard-sub">3 steps • Generates next steps + drafts automatically</div>
          </div>
          <div class="stepper" aria-label="Steps">
            <div class="step active" data-step-dot="1">1</div>
            <div class="step" data-step-dot="2">2</div>
            <div class="step" data-step-dot="3">3</div>
          </div>
        </div>

        <form id="wizardForm" class="wizard-body" novalidate>
          <!-- STEP 1 -->
          <div class="step-panel" data-step="1">
            <div class="field-grid">
              <label class="field">
                <span>Full name</span>
                <input id="name" type="text" placeholder="Jane Smith" autocomplete="name" required />
              </label>

              <label class="field">
                <span>Phone</span>
                <input id="phone" type="tel" placeholder="(401) 555-0123" autocomplete="tel" />
              </label>

              <label class="field full">
                <span>Email</span>
                <input id="email" type="email" placeholder="jane@email.com" autocomplete="email" required />
              </label>

              <label class="field full">
                <span>Property address</span>
                <input id="address" type="text" placeholder="123 Main St, Providence, RI" required />
              </label>
            </div>

            <div class="wizard-actions">
              <span class="hintline">Next: details that usually take multiple follow-ups</span>
              <button class="btn btn-primary" type="button" id="next1">Continue</button>
            </div>
          </div>

          <!-- STEP 2 -->
          <div class="step-panel" data-step="2" hidden>
            <div class="field-grid">
              <label class="field">
                <span>Seller type</span>
                <select id="sellerType">
                  <option value="homeowner" selected>Homeowner</option>
                  <option value="agent">Agent / Broker</option>
                  <option value="executor">Executor / Probate</option>
                  <option value="other">Other</option>
                </select>
              </label>

              <label class="field">
                <span>Timeline</span>
                <select id="timeline">
                  <option value="asap" selected>ASAP (0–30 days)</option>
                  <option value="soon">Soon (30–60 days)</option>
                  <option value="flexible">Flexible (60+ days)</option>
                </select>
              </label>

              <label class="field">
                <span>Property condition</span>
                <select id="condition">
                  <option value="good" selected>Good / livable</option>
                  <option value="needs-work">Needs work</option>
                  <option value="major">Major repairs</option>
                </select>
              </label>

              <label class="field">
                <span>Occupancy</span>
                <select id="occupancy">
                  <option value="owner" selected>Owner occupied</option>
                  <option value="tenant">Tenant occupied</option>
                  <option value="vacant">Vacant</option>
                </select>
              </label>

              <label class="field">
                <span>Photos available?</span>
                <select id="photos">
                  <option value="yes" selected>Yes</option>
                  <option value="no">No</option>
                  <option value="some">Some</option>
                </select>
              </label>

              <label class="field">
                <span>Any liens / legal complexity?</span>
                <select id="legal">
                  <option value="no" selected>No</option>
                  <option value="yes">Yes</option>
                  <option value="unsure">Not sure</option>
                </select>
              </label>

              <label class="field full">
                <span>Notes (optional)</span>
                <textarea id="notes" placeholder="Repairs, access, probate, tenant status, etc."></textarea>
              </label>
            </div>

            <div class="wizard-actions">
              <button class="btn btn-outline" type="button" id="back2">Back</button>
              <button class="btn btn-primary" type="button" id="next2">Generate Automation Outputs</button>
            </div>
          </div>

          <!-- STEP 3 -->
          <div class="step-panel" data-step="3" hidden>
            <div class="result-grid">
              <div class="result-card">
                <div class="result-title">Lead qualification (auto)</div>
                <div class="qual">
                  <div class="qual-row">
                    <span>Priority</span>
                    <strong id="qPriority">—</strong>
                  </div>
                  <div class="qual-row">
                    <span>Route to</span>
                    <strong id="qRoute">—</strong>
                  </div>
                  <div class="qual-row">
                    <span>Reason</span>
                    <strong id="qReason">—</strong>
                  </div>
                </div>
                <div class="mini-note">
                  This simulates routing rules (e.g., tenant + legal → senior review).
                </div>
              </div>

              <div class="result-card">
                <div class="result-title">Auto-generated next steps</div>
                <ul class="checklist" id="nextSteps"></ul>
              </div>

              <div class="result-card full">
                <div class="result-title">Follow-up email draft</div>
                <textarea class="draft" id="emailDraft" readonly></textarea>
                <div class="row">
                  <button class="btn btn-outline" type="button" id="copyEmail">Copy Email</button>
                </div>
              </div>

              <div class="result-card full">
                <div class="result-title">Call script (for first contact)</div>
                <textarea class="draft" id="callScript" readonly></textarea>
                <div class="row">
                  <button class="btn btn-outline" type="button" id="copyScript">Copy Script</button>
                  <button class="btn btn-outline" type="button" id="exportJson">Export CRM JSON</button>
                  <a class="btn btn-primary" href="contact.html">Open Contact (auto-filled)</a>
                </div>
                <div class="mini-note">
                  Export JSON simulates pushing to CRM / SharePoint list / Zapier / Power Automate.
                </div>
              </div>
            </div>

            <div class="wizard-actions">
              <button class="btn btn-outline" type="button" id="back3">Back</button>
              <button class="btn btn-primary" type="button" id="saveLead">Save Lead</button>
            </div>
          </div>

          <div class="form-error" id="formError" role="alert" aria-live="polite"></div>
        </form>
      </section>

      <aside class="side card-soft" aria-label="Automation notes">
        <div class="section-title">Why this is a good demo</div>

        <div class="side-block">
          <div class="side-title">Tedious task automated</div>
          <div class="side-text">Stops repeated “Can you send photos / timeline / occupancy / liens?” follow-ups.</div>
        </div>

        <div class="side-block">
          <div class="side-title">Consistent qualification</div>
          <div class="side-text">Rules decide priority + routing instantly and consistently.</div>
        </div>

        <div class="side-block">
          <div class="side-title">Faster responses</div>
          <div class="side-text">Auto-generates the first email + call script so your team can respond in minutes.</div>
        </div>

        <hr class="hr" />

        <div class="mini-note">
          In production, this page would send data to an endpoint and trigger:
          Email + SMS + CRM record + task assignment + calendar scheduling automatically.
        </div>
      </aside>
    </div>
  </main>

  <footer>
    <div class="container">© <span id="year"></span> WCV Premier LLC • Automation demo for PalmWeb.</div>
  </footer>

  <script src="assets/site.js"></script>
  <script>
    (function(){
      const $ = (id) => document.getElementById(id);

      const dots = Array.from(document.querySelectorAll("[data-step-dot]"));
      const panels = Array.from(document.querySelectorAll(".step-panel"));
      const formError = $("formError");

      const STORAGE_KEY = "wcv_demo_lead";

      function setStep(n){
        dots.forEach(d => d.classList.toggle("active", Number(d.dataset.stepDot) === n));
        panels.forEach(p => p.hidden = Number(p.dataset.step) !== n);
        formError.textContent = "";
        formError.classList.remove("show");
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function showError(msg){
        formError.textContent = msg;
        formError.classList.add("show");
      }

      function v(id){ return String($(id).value || "").trim(); }

      function validateStep1(){
        if(!v("name")) return "Please enter your name.";
        const em = v("email");
        if(!em || !em.includes("@")) return "Please enter a valid email.";
        if(!v("address")) return "Please enter the property address.";
        return "";
      }

      function getLead(){
        return {
          name: v("name"),
          phone: v("phone"),
          email: v("email"),
          address: v("address"),
          sellerType: $("sellerType").value,
          timeline: $("timeline").value,
          condition: $("condition").value,
          occupancy: $("occupancy").value,
          photos: $("photos").value,
          legal: $("legal").value,
          notes: v("notes"),
          createdAt: new Date().toISOString(),
          source: "automation_demo"
        };
      }

      function qualify(lead){
        // Simple rules for demo effect:
        // tenant + legal yes/unsure => high priority + senior review
        // asap + major => high priority
        // asap or soon => medium
        // else => normal
        let priority = "Normal";
        let route = "Standard follow-up";
        const reasons = [];

        if(lead.timeline === "asap"){ reasons.push("timeline ASAP"); }
        if(lead.condition === "major"){ reasons.push("major repairs"); }
        if(lead.occupancy === "tenant"){ reasons.push("tenant occupied"); }
        if(lead.legal === "yes"){ reasons.push("legal complexity"); }
        if(lead.legal === "unsure"){ reasons.push("legal unknown"); }
        if(lead.photos === "no"){ reasons.push("needs photos"); }

        const hard = (lead.occupancy === "tenant") && (lead.legal !== "no");
        const urgent = (lead.timeline === "asap") && (lead.condition === "major");

        if(hard || urgent){
          priority = "High";
          route = "Senior review + fast call";
        } else if(lead.timeline === "asap" || lead.timeline === "soon"){
          priority = "Medium";
          route = "Call within 24–48 hours";
        } else {
          priority = "Normal";
          route = "Standard follow-up";
        }

        const reason = reasons.length ? reasons.join(", ") : "standard lead";
        return { priority, route, reason };
      }

      function nextSteps(lead, q){
        const steps = [];
        steps.push("Confirm best callback time and access details.");
        if(lead.photos !== "yes") steps.push("Request 5–8 photos or a short walkthrough video.");
        if(lead.occupancy === "tenant") steps.push("Collect lease status, rent amount, and tenant cooperation notes.");
        if(lead.legal !== "no") steps.push("Ask about liens/probate/foreclosure timeline and gather basic docs if available.");
        if(lead.condition === "major") steps.push("Estimate repair scope: roof/HVAC/plumbing/foundation (high level).");
        if(lead.timeline === "asap") steps.push("Offer fast close option (7–21 days) and verify constraints.");
        steps.push("Prepare offer options and a simple closing plan (fast vs flexible).");
        steps.push("Send summary + next steps to the lead (email/SMS) and create CRM task.");
        return steps;
      }

      function buildEmail(lead, q, steps){
        const first = (lead.name || "").split(" ")[0] || "there";
        const timeline = lead.timeline === "asap" ? "ASAP" : (lead.timeline === "soon" ? "Soon" : "Flexible");
        const occ = lead.occupancy === "owner" ? "owner-occupied" : (lead.occupancy === "tenant" ? "tenant-occupied" : "vacant");
        const cond = lead.condition === "good" ? "good condition" : (lead.condition === "needs-work" ? "needs work" : "needs major repairs");

        const topSteps = steps.slice(0, 4).map((s,i)=>`${i+1}) ${s}`).join("\n");

        return [
          `Subject: Next steps for ${lead.address}`,
          ``,
          `Hi ${first},`,
          ``,
          `Thanks for reaching out about ${lead.address}. Based on what you shared (${occ}, ${cond}, timeline: ${timeline}), here’s what we’ll do next:`,
          ``,
          topSteps,
          ``,
          `We’ve marked this as Priority: ${q.priority} (${q.reason}).`,
          ``,
          `What’s the best time for a quick call today or tomorrow?`,
          ``,
          `— WCV Premier LLC`,
          `Contact: (your number) • (your email)`
        ].join("\n");
      }

      function buildCallScript(lead, q){
        const timeline = lead.timeline === "asap" ? "ASAP" : (lead.timeline === "soon" ? "Soon" : "Flexible");
        return [
          `CALL SCRIPT — ${lead.address}`,
          `Lead priority: ${q.priority} | Route: ${q.route}`,
          ``,
          `1) Intro`,
          `   “Hi ${lead.name || ""}, this is ____ with WCV Premier. Thanks for reaching out about ${lead.address}.”`,
          ``,
          `2) Confirm key facts (30–60 seconds)`,
          `   - Timeline: ${timeline}`,
          `   - Occupancy: ${lead.occupancy}`,
          `   - Condition: ${lead.condition}`,
          `   - Photos: ${lead.photos}`,
          `   - Legal/Liens: ${lead.legal}`,
          ``,
          `3) One clarifying question`,
          `   “What’s the #1 thing you want to solve with this sale (speed, certainty, avoiding repairs, etc.)?”`,
          ``,
          `4) Set next step`,
          `   “Great — next we’ll review details and come back with offer options + a closing plan.”`,
          ``,
          `5) Close`,
          `   “If you can text/email any photos, that speeds things up. What’s the best email/number to send a summary to?”`
        ].join("\n");
      }

      function escapeHtml(str){
        return String(str||"")
          .replaceAll("&","&amp;")
          .replaceAll("<","&lt;")
          .replaceAll(">","&gt;")
          .replaceAll('"',"&quot;")
          .replaceAll("'","&#039;");
      }

      function renderStep3(lead){
        const q = qualify(lead);
        const steps = nextSteps(lead, q);

        $("qPriority").textContent = q.priority;
        $("qRoute").textContent = q.route;
        $("qReason").textContent = q.reason;

        $("nextSteps").innerHTML = steps.map(s => `<li>${escapeHtml(s)}</li>`).join("");

        $("emailDraft").value = buildEmail(lead, q, steps);
        $("callScript").value = buildCallScript(lead, q);

        return { q, steps };
      }

      function downloadJson(obj){
        const blob = new Blob([JSON.stringify(obj, null, 2)], { type:"application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "wcv-lead.json";
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
      }

      $("next1").addEventListener("click", () => {
        const err = validateStep1();
        if(err){ showError(err); return; }
        setStep(2);
      });

      $("back2").addEventListener("click", () => setStep(1));

      $("next2").addEventListener("click", () => {
        const err = validateStep1();
        if(err){ showError(err); setStep(1); return; }
        const lead = getLead();
        renderStep3(lead);
        setStep(3);
      });

      $("back3").addEventListener("click", () => setStep(2));

      $("copyEmail").addEventListener("click", async () => {
        try{
          await navigator.clipboard.writeText($("emailDraft").value || "");
          $("copyEmail").textContent = "Copied!";
          setTimeout(() => $("copyEmail").textContent = "Copy Email", 1200);
        }catch{
          showError("Copy failed in this browser. You can manually select and copy the text.");
        }
      });

      $("copyScript").addEventListener("click", async () => {
        try{
          await navigator.clipboard.writeText($("callScript").value || "");
          $("copyScript").textContent = "Copied!";
          setTimeout(() => $("copyScript").textContent = "Copy Script", 1200);
        }catch{
          showError("Copy failed in this browser. You can manually select and copy the text.");
        }
      });

      $("exportJson").addEventListener("click", () => {
        const lead = getLead();
        const { q, steps } = renderStep3(lead);
        const payload = {
          ...lead,
          automation: {
            qualification: q,
            nextSteps: steps,
            emailDraft: $("emailDraft").value,
            callScript: $("callScript").value
          }
        };
        downloadJson(payload);
      });

      $("saveLead").addEventListener("click", () => {
        const lead = getLead();
        const { q, steps } = renderStep3(lead);

        const payload = {
          ...lead,
          automation: {
            qualification: q,
            nextSteps: steps,
            emailDraft: $("emailDraft").value,
            callScript: $("callScript").value
          }
        };

        localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));
        $("saveLead").textContent = "Saved!";
        setTimeout(() => $("saveLead").textContent = "Save Lead", 1200);
      });

      setStep(1);
    })();
  </script>
</body>
</html>
