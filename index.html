<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PalmWeb ‚Äî Payment Portal (Demo)</title>
  <meta name="description" content="Demo payment portal: validate invoice number, select card/ACH, and generate a printable receipt." />
  <meta name="theme-color" content="#ffffff" />

  <style>
    :root{
      --bg:#f6fbff;
      --card:#ffffff;
      --text:#0b1220;
      --muted:#556173;
      --hair: rgba(15,23,42,.10);

      --blue:#1d79c6;
      --green:#2cab4b;
      --ink:#0b1220;

      --shadow: 0 18px 55px rgba(15,23,42,.10);
      --shadow2: 0 10px 28px rgba(15,23,42,.08);

      --radius: 22px;
      --max: 1100px;
    }

    *{ box-sizing:border-box; }
    html,body{
      margin:0;
      padding:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--text);
      line-height: 1.55;
      background:
        radial-gradient(1100px 560px at 20% -10%, rgba(29,121,198,.14), transparent 60%),
        radial-gradient(1100px 560px at 90% 0%, rgba(44,171,75,.10), transparent 60%),
        var(--bg);
    }
    a{ color:inherit; }
    .container{ max-width: var(--max); margin: 0 auto; padding: 0 18px; }

    header{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(246,251,255,.86);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--hair);
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 12px 0;
    }
    .brand{
      display:flex; align-items:center; gap: 12px;
      text-decoration:none;
      white-space: nowrap;
    }
    .logo{
      width: 40px; height: 40px;
      border-radius: 14px;
      display:flex; align-items:center; justify-content:center;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.80);
      font-weight: 950;
      letter-spacing: .2px;
    }
    .brand strong{ font-weight: 950; font-size: 13.5px; }
    .brand span{ display:block; font-size: 12px; font-weight: 800; color: rgba(11,18,32,.62); }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 8px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid transparent;
      text-decoration:none;
      font-weight: 950;
      cursor:pointer;
      user-select:none;
      white-space: nowrap;
      transition: transform .08s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
    }
    .btn:active{ transform: translateY(1px); }
    .btn-primary{
      color:#fff;
      background: linear-gradient(135deg, var(--blue), var(--green));
      box-shadow: 0 16px 36px rgba(29,121,198,.18);
    }
    .btn-outline{
      background: rgba(255,255,255,.82);
      border-color: var(--hair);
      color: rgba(11,18,32,.92);
    }
    .btn-outline:hover{ background:#fff; border-color: rgba(15,23,42,.14); }
    .btn-ink{
      background: var(--ink);
      color: #fff;
      box-shadow: 0 16px 36px rgba(11,18,32,.18);
    }

    main{ padding: 22px 0 46px; }

    .shell{
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(15,23,42,.10);
      border-radius: 28px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .head{
      padding: 18px 18px 0;
    }
    h1{
      margin: 0 0 8px;
      font-size: clamp(28px, 3.6vw, 42px);
      line-height: 1.05;
      letter-spacing: -0.9px;
    }
    .lead{
      margin: 0 0 14px;
      color: rgba(11,18,32,.70);
      font-weight: 750;
      max-width: 90ch;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 12px;
      padding: 18px;
      align-items:start;
    }

    .card{
      background: #fff;
      border: 1px solid rgba(15,23,42,.10);
      border-radius: 22px;
      box-shadow: var(--shadow2);
      padding: 16px;
      position: relative;
      overflow:hidden;
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(320px 180px at 15% 20%, rgba(29,121,198,.10), transparent 70%),
        radial-gradient(320px 180px at 90% 0%, rgba(44,171,75,.08), transparent 70%);
      pointer-events:none;
    }
    .card > *{ position: relative; }

    .card h2{
      margin:0 0 10px;
      font-size: 14px;
      font-weight: 950;
      letter-spacing: -0.2px;
      color: rgba(11,18,32,.92);
    }

    .row{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }

    label{
      display:flex;
      flex-direction:column;
      gap: 6px;
      font-weight: 900;
      font-size: 13px;
      color: rgba(11,18,32,.92);
      margin-top: 10px;
    }
    input, select{
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,.12);
      background:#fff;
      font-size: 14px;
      font-weight: 750;
      outline:none;
    }
    input:focus, select:focus{
      border-color: rgba(29,121,198,.55);
      box-shadow: 0 0 0 4px rgba(29,121,198,.10);
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(15,23,42,.03);
      padding: 8px 10px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 12px;
      color: rgba(11,18,32,.70);
      white-space: nowrap;
    }
    .mini{
      font-size: 12px;
      color: rgba(11,18,32,.55);
      font-weight: 800;
    }
    .warn{
      border: 1px solid rgba(255, 153, 0, .35);
      background: rgba(255, 153, 0, .10);
      color: rgba(120, 70, 0, .95);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 850;
      font-size: 13px;
      margin-top: 12px;
    }
    .ok{
      border: 1px solid rgba(44,171,75,.28);
      background: rgba(44,171,75,.10);
      color: rgba(10, 80, 25, .95);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 850;
      font-size: 13px;
      margin-top: 12px;
    }

    .summary{
      border-top: 1px solid rgba(15,23,42,.10);
      margin-top: 12px;
      padding-top: 12px;
      display:grid;
      gap: 8px;
    }
    .kv{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 12px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.85);
      border-radius: 14px;
      font-size: 13.5px;
      font-weight: 800;
    }
    .kv span:first-child{ color: rgba(11,18,32,.60); font-weight: 850; }
    .kv strong{ font-weight: 950; color: rgba(11,18,32,.92); }

    .method-tabs{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      margin-top: 10px;
    }
    .tab{
      flex: 1 1 160px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.85);
      border-radius: 16px;
      padding: 12px;
      cursor:pointer;
      user-select:none;
      font-weight: 950;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      white-space: nowrap;
    }
    .tab small{
      font-weight: 850;
      color: rgba(11,18,32,.58);
    }
    .tab.active{
      border-color: rgba(29,121,198,.35);
      box-shadow: 0 0 0 4px rgba(29,121,198,.10);
    }

    .two{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    .receipt{
      display:none;
    }

    /* Print */
    @media print{
      header, .no-print{ display:none !important; }
      body{ background:#fff; }
      main{ padding:0; }
      .shell{ box-shadow:none; border:none; background:#fff; }
      .grid{ grid-template-columns: 1fr; padding: 0; }
      .card{ box-shadow:none; border: 1px solid #e5e7eb; }
      .receipt{ display:block !important; }
      .receipt .card{ page-break-inside: avoid; }
    }

    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
      .two{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <header>
    <div class="container nav">
      <a class="brand" href="../index.html">
        <div class="logo">PW</div>
        <div>
          <strong>PalmWeb</strong>
          <span>Payment Portal (Demo)</span>
        </div>
      </a>

      <div class="row">
        <a class="btn btn-outline" href="../index.html">Back to PalmWeb</a>
        <button class="btn btn-primary no-print" id="printBtn" type="button">Print Receipt</button>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <div class="shell">
        <div class="head">
          <div class="row" style="justify-content:space-between;">
            <div>
              <h1>Payment Portal</h1>
              <p class="lead">Validate an invoice number, choose Credit Card or ACH, and generate a printable receipt. Demo only (no real payment processing).</p>
            </div>
            <div class="row no-print" style="justify-content:flex-end;">
              <span class="pill">Demo Tool</span>
              <span class="pill">Front-end Only</span>
            </div>
          </div>
        </div>

        <div class="grid">
          <!-- Left: Payment Form -->
          <section class="card">
            <h2>Invoice Validation</h2>

            <div class="two">
              <label>
                Invoice #
                <input id="invoiceNo" placeholder="INV-1001" autocomplete="off" />
              </label>

              <label>
                Email (optional)
                <input id="payerEmail" type="email" placeholder="you@company.com" />
              </label>
            </div>

            <div class="row" style="margin-top:12px;">
              <button class="btn btn-primary" id="validateBtn" type="button">Validate Invoice</button>
              <button class="btn btn-outline" id="fillDemoBtn" type="button">Use Demo Invoice</button>
              <span class="mini">Try: INV-1001, INV-1002, INV-2044</span>
            </div>

            <div id="status" class="warn" style="display:none;"></div>

            <div id="invoiceSummary" class="summary" style="display:none;">
              <div class="kv"><span>Client</span><strong id="clientName">‚Äî</strong></div>
              <div class="kv"><span>Invoice</span><strong id="invDisplay">‚Äî</strong></div>
              <div class="kv"><span>Amount Due</span><strong id="amountDue">$0.00</strong></div>
              <div class="kv"><span>Due Date</span><strong id="dueDate">‚Äî</strong></div>
            </div>

            <div id="paymentBlock" style="display:none; margin-top:14px;">
              <h2 style="margin-top:14px;">Payment Method</h2>

              <div class="method-tabs">
                <div class="tab active" id="tabCard" role="button" tabindex="0">
                  <div>Credit Card<br><small>Instant confirmation</small></div>
                  <div>üí≥</div>
                </div>
                <div class="tab" id="tabAch" role="button" tabindex="0">
                  <div>ACH Transfer<br><small>1‚Äì3 business days</small></div>
                  <div>üè¶</div>
                </div>
              </div>

              <!-- Card fields -->
              <div id="cardFields" style="margin-top:10px;">
                <div class="two">
                  <label>
                    Cardholder name
                    <input id="cardName" placeholder="Name on card" autocomplete="off" />
                  </label>
                  <label>
                    Card number
                    <input id="cardNumber" inputmode="numeric" placeholder="4242 4242 4242 4242" autocomplete="off" />
                  </label>
                </div>

                <div class="two">
                  <label>
                    Expiration
                    <input id="cardExp" placeholder="MM/YY" autocomplete="off" />
                  </label>
                  <label>
                    CVC
                    <input id="cardCvc" inputmode="numeric" placeholder="123" autocomplete="off" />
                  </label>
                </div>
              </div>

              <!-- ACH fields -->
              <div id="achFields" style="display:none; margin-top:10px;">
                <div class="two">
                  <label>
                    Account holder name
                    <input id="achName" placeholder="Name on bank account" autocomplete="off" />
                  </label>
                  <label>
                    Bank name
                    <input id="achBank" placeholder="Example: Citizens Bank" autocomplete="off" />
                  </label>
                </div>

                <div class="two">
                  <label>
                    Routing number
                    <input id="achRouting" inputmode="numeric" placeholder="9-digit routing" autocomplete="off" />
                  </label>
                  <label>
                    Account number
                    <input id="achAccount" inputmode="numeric" placeholder="Account number" autocomplete="off" />
                  </label>
                </div>
              </div>

              <label style="margin-top:12px;">
                Amount to pay
                <input id="payAmount" inputmode="decimal" placeholder="$0.00" />
              </label>

              <div class="row" style="margin-top:12px;">
                <button class="btn btn-ink" id="payBtn" type="button">Process Payment (Demo)</button>
                <button class="btn btn-outline" id="resetBtn" type="button">Reset</button>
                <span class="mini">Demo only ‚Äî no charge is made.</span>
              </div>

              <div id="payStatus" class="ok" style="display:none;"></div>
            </div>
          </section>

          <!-- Right: Receipt Preview -->
          <aside class="card">
            <h2>Receipt Preview</h2>
            <p class="mini" style="margin-top:-4px;">After a successful demo payment, this becomes printable.</p>

            <div class="summary" style="margin-top:10px;">
              <div class="kv"><span>Status</span><strong id="previewStatus">Awaiting validation</strong></div>
              <div class="kv"><span>Method</span><strong id="previewMethod">‚Äî</strong></div>
              <div class="kv"><span>Confirmation</span><strong id="previewConf">‚Äî</strong></div>
            </div>

            <div class="summary">
              <div class="kv"><span>Invoice</span><strong id="previewInv">‚Äî</strong></div>
              <div class="kv"><span>Client</span><strong id="previewClient">‚Äî</strong></div>
              <div class="kv"><span>Paid</span><strong id="previewPaid">$0.00</strong></div>
              <div class="kv"><span>Date</span><strong id="previewDate">‚Äî</strong></div>
            </div>

            <div class="warn no-print" style="margin-top:12px;">
              Demo note: In production, this would connect to Stripe/Authorize.Net + QuickBooks,
              validate invoice status, and record the payment automatically.
            </div>

            <!-- Print-only receipt block -->
            <div class="receipt" aria-hidden="true">
              <div style="margin-top:14px;">
                <h2 style="font-size:16px;margin:0 0 8px;">Payment Receipt</h2>
                <div class="mini">PalmWeb ‚Äî Demo Payment Portal</div>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </div>
  </main>

  <script>
    const invoices = [
      { no: "INV-1001", client: "Acme Home Services", amount: 1250.00, due: "2026-01-26" },
      { no: "INV-1002", client: "Renee K. Wellness Studio", amount: 650.00, due: "2026-02-05" },
      { no: "INV-2044", client: "Smith & Sons Plumbing", amount: 2400.00, due: "2026-02-12" },
    ];

    const $ = (id) => document.getElementById(id);

    const invoiceNo = $("invoiceNo");
    const payerEmail = $("payerEmail");
    const validateBtn = $("validateBtn");
    const fillDemoBtn = $("fillDemoBtn");
    const status = $("status");
    const invoiceSummary = $("invoiceSummary");
    const paymentBlock = $("paymentBlock");

    const clientName = $("clientName");
    const invDisplay = $("invDisplay");
    const amountDue = $("amountDue");
    const dueDate = $("dueDate");

    const tabCard = $("tabCard");
    const tabAch = $("tabAch");
    const cardFields = $("cardFields");
    const achFields = $("achFields");

    const payAmount = $("payAmount");
    const payBtn = $("payBtn");
    const resetBtn = $("resetBtn");
    const payStatus = $("payStatus");

    const previewStatus = $("previewStatus");
    const previewMethod = $("previewMethod");
    const previewConf = $("previewConf");
    const previewInv = $("previewInv");
    const previewClient = $("previewClient");
    const previewPaid = $("previewPaid");
    const previewDate = $("previewDate");

    const printBtn = $("printBtn");

    let selectedInvoice = null;
    let method = "card";

    function money(n){
      return n.toLocaleString(undefined, { style:"currency", currency:"USD" });
    }

    function fmtDate(iso){
      try{
        const d = new Date(iso + "T00:00:00");
        return d.toLocaleDateString(undefined, { year:"numeric", month:"2-digit", day:"2-digit" });
      } catch {
        return iso;
      }
    }

    function setStatus(msg, ok=false){
      status.style.display = "";
      status.className = ok ? "ok" : "warn";
      status.textContent = msg;
    }

    function clearStatus(){
      status.style.display = "none";
      status.textContent = "";
    }

    function setMethod(m){
      method = m;
      tabCard.classList.toggle("active", m === "card");
      tabAch.classList.toggle("active", m === "ach");
      cardFields.style.display = m === "card" ? "" : "none";
      achFields.style.display = m === "ach" ? "" : "none";
      previewMethod.textContent = m === "card" ? "Credit Card" : "ACH Transfer";
    }

    function validateInvoice(){
      clearStatus();
      payStatus.style.display = "none";

      const inv = invoiceNo.value.trim().toUpperCase();
      if(!inv){
        setStatus("Enter an invoice number to continue.");
        return;
      }

      const found = invoices.find(x => x.no === inv);
      if(!found){
        selectedInvoice = null;
        invoiceSummary.style.display = "none";
        paymentBlock.style.display = "none";

        previewStatus.textContent = "Invoice not found";
        previewInv.textContent = inv || "‚Äî";
        previewClient.textContent = "‚Äî";
        previewPaid.textContent = money(0);
        previewConf.textContent = "‚Äî";
        previewDate.textContent = "‚Äî";
        previewMethod.textContent = "‚Äî";

        setStatus("Invoice number not found. Try INV-1001, INV-1002, or INV-2044.");
        return;
      }

      selectedInvoice = found;

      invoiceSummary.style.display = "";
      paymentBlock.style.display = "";

      clientName.textContent = found.client;
      invDisplay.textContent = found.no;
      amountDue.textContent = money(found.amount);
      dueDate.textContent = fmtDate(found.due);

      payAmount.value = found.amount.toFixed(2);

      previewStatus.textContent = "Validated ‚Äî ready to pay";
      previewInv.textContent = found.no;
      previewClient.textContent = found.client;
      previewPaid.textContent = money(0);
      previewConf.textContent = "‚Äî";
      previewDate.textContent = "‚Äî";

      setMethod(method);

      setStatus("Invoice validated. Select a payment method and submit payment (demo).", true);
    }

    function processPayment(){
      if(!selectedInvoice){
        setStatus("Validate an invoice before paying.");
        return;
      }

      const amt = Number(String(payAmount.value).replace(/[^0-9.]/g,""));
      if(!amt || amt <= 0){
        setStatus("Enter a valid payment amount.");
        payAmount.focus();
        return;
      }

      if(amt > selectedInvoice.amount){
        setStatus("Payment amount cannot exceed amount due.");
        payAmount.focus();
        return;
      }

      // Minimal demo validation per method
      if(method === "card"){
        const cn = $("cardName").value.trim();
        const num = $("cardNumber").value.replace(/\s+/g,"").trim();
        const exp = $("cardExp").value.trim();
        const cvc = $("cardCvc").value.trim();
        if(!cn || num.length < 12 || !exp || cvc.length < 3){
          setStatus("Complete the credit card fields (demo validation).");
          return;
        }
      } else {
        const an = $("achName").value.trim();
        const bank = $("achBank").value.trim();
        const r = $("achRouting").value.trim();
        const a = $("achAccount").value.trim();
        if(!an || !bank || r.length < 9 || a.length < 4){
          setStatus("Complete the ACH fields (demo validation).");
          return;
        }
      }

      // Demo ‚Äúsuccess‚Äù
      const conf = "PMT-" + Math.random().toString(16).slice(2,10).toUpperCase();
      const now = new Date();

      payStatus.style.display = "";
      payStatus.textContent = `Payment accepted (demo). Confirmation: ${conf}`;

      previewStatus.textContent = "Paid (demo)";
      previewConf.textContent = conf;
      previewPaid.textContent = money(amt);
      previewDate.textContent = now.toLocaleString();

      // keep status green
      setStatus("Payment processed successfully (demo). You can print a receipt.", true);
    }

    function resetAll(){
      selectedInvoice = null;
      invoiceNo.value = "";
      payAmount.value = "";
      payerEmail.value = "";

      invoiceSummary.style.display = "none";
      paymentBlock.style.display = "none";
      payStatus.style.display = "none";

      previewStatus.textContent = "Awaiting validation";
      previewMethod.textContent = "‚Äî";
      previewConf.textContent = "‚Äî";
      previewInv.textContent = "‚Äî";
      previewClient.textContent = "‚Äî";
      previewPaid.textContent = money(0);
      previewDate.textContent = "‚Äî";

      clearStatus();
      setMethod("card");
    }

    validateBtn.addEventListener("click", validateInvoice);
    fillDemoBtn.addEventListener("click", () => {
      invoiceNo.value = "INV-1001";
      validateInvoice();
    });

    tabCard.addEventListener("click", () => setMethod("card"));
    tabAch.addEventListener("click", () => setMethod("ach"));
    tabCard.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" ") setMethod("card"); });
    tabAch.addEventListener("keydown", (e)=>{ if(e.key==="Enter"||e.key===" ") setMethod("ach"); });

    payBtn.addEventListener("click", processPayment);
    resetBtn.addEventListener("click", resetAll);

    printBtn.addEventListener("click", () => window.print());

    // Initialize
    setMethod("card");
  </script>
</body>
</html>
