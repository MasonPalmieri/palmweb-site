<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PalmWeb — Lead Intake Tool</title>
  <meta name="description" content="Smart lead intake tool with conditional fields, validation, and print-ready output." />
  <meta name="theme-color" content="#ffffff" />

  <style>
    :root{
      --bg:#f6fbff;
      --card:#ffffff;
      --text:#0b1220;
      --muted:#556173;
      --hair: rgba(15,23,42,.10);

      --blue:#1d79c6;
      --green:#2cab4b;
      --ink:#0b1220;

      --shadow: 0 18px 55px rgba(15,23,42,.10);
      --shadow2: 0 10px 28px rgba(15,23,42,.08);

      --radius: 22px;
      --max: 1180px;
    }

    *{ box-sizing:border-box; }
    html,body{
      margin:0;
      padding:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--text);
      line-height: 1.55;
      background:
        radial-gradient(1100px 560px at 20% -10%, rgba(29,121,198,.14), transparent 60%),
        radial-gradient(1100px 560px at 90% 0%, rgba(44,171,75,.10), transparent 60%),
        var(--bg);
    }
    a{ color:inherit; }
    .container{ max-width: var(--max); margin: 0 auto; padding: 0 18px; }

    header{
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(246,251,255,.86);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--hair);
    }
    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 12px 0;
    }
    .brand{
      display:flex; align-items:center; gap: 12px;
      text-decoration:none;
      white-space: nowrap;
      min-width:0;
    }
    .logo{
      width: 40px; height: 40px;
      border-radius: 14px;
      display:flex; align-items:center; justify-content:center;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.80);
      font-weight: 950;
      letter-spacing: .2px;
      flex: 0 0 auto;
    }
    .brand strong{ font-weight: 950; font-size: 13.5px; }
    .brand span{
      display:block;
      font-size: 12px;
      font-weight: 800;
      color: rgba(11,18,32,.62);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
      max-width: 520px;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 8px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid transparent;
      text-decoration:none;
      font-weight: 950;
      cursor:pointer;
      user-select:none;
      white-space: nowrap;
      transition: transform .08s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
    }
    .btn:active{ transform: translateY(1px); }
    .btn-primary{
      color:#fff;
      background: linear-gradient(135deg, var(--blue), var(--green));
      box-shadow: 0 16px 36px rgba(29,121,198,.18);
    }
    .btn-outline{
      background: rgba(255,255,255,.82);
      border-color: var(--hair);
      color: rgba(11,18,32,.92);
    }
    .btn-outline:hover{ background:#fff; border-color: rgba(15,23,42,.14); }
    .btn-ink{
      background: var(--ink);
      color: #fff;
      box-shadow: 0 16px 36px rgba(11,18,32,.18);
    }
    .row{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }

    main{ padding: 22px 0 48px; }

    .shell{
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(15,23,42,.10);
      border-radius: 28px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .head{
      padding: 18px 18px 0;
    }
    h1{
      margin: 0 0 8px;
      font-size: clamp(28px, 3.6vw, 42px);
      line-height: 1.05;
      letter-spacing: -0.9px;
    }
    .lead{
      margin: 0 0 14px;
      color: rgba(11,18,32,.70);
      font-weight: 750;
      max-width: 92ch;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(15,23,42,.03);
      padding: 8px 10px;
      border-radius: 999px;
      font-weight: 900;
      font-size: 12px;
      color: rgba(11,18,32,.70);
      white-space: nowrap;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap: 12px;
      padding: 18px;
      align-items:start;
    }

    .card{
      background: #fff;
      border: 1px solid rgba(15,23,42,.10);
      border-radius: 22px;
      box-shadow: var(--shadow2);
      padding: 16px;
      position: relative;
      overflow:hidden;
    }
    .card:before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(320px 180px at 15% 20%, rgba(29,121,198,.10), transparent 70%),
        radial-gradient(320px 180px at 90% 0%, rgba(44,171,75,.08), transparent 70%);
      pointer-events:none;
    }
    .card > *{ position: relative; }

    .card h2{
      margin:0 0 10px;
      font-size: 14px;
      font-weight: 950;
      letter-spacing: -0.2px;
      color: rgba(11,18,32,.92);
    }

    .mini{
      font-size: 12px;
      color: rgba(11,18,32,.55);
      font-weight: 800;
    }

    .form{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    .full{ grid-column: 1 / -1; }

    label{
      display:flex;
      flex-direction:column;
      gap: 6px;
      font-weight: 900;
      font-size: 13px;
      color: rgba(11,18,32,.92);
    }
    input, select, textarea{
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,.12);
      background:#fff;
      font-size: 14px;
      font-weight: 750;
      outline:none;
    }
    input:focus, select:focus, textarea:focus{
      border-color: rgba(29,121,198,.55);
      box-shadow: 0 0 0 4px rgba(29,121,198,.10);
    }
    textarea{ resize: vertical; min-height: 110px; }

    .sep{
      margin: 12px 0;
      border-top: 1px solid rgba(15,23,42,.10);
    }

    .chips{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 8px;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(15,23,42,.10);
      background:#fff;
      font-weight: 850;
      font-size: 13px;
      cursor:pointer;
      user-select:none;
      white-space: nowrap;
    }
    .chip input{ accent-color: var(--blue); }

    .warn{
      border: 1px solid rgba(255, 153, 0, .35);
      background: rgba(255, 153, 0, .10);
      color: rgba(120, 70, 0, .95);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 850;
      font-size: 13px;
      margin-top: 10px;
      display:none;
    }
    .ok{
      border: 1px solid rgba(44,171,75,.28);
      background: rgba(44,171,75,.10);
      color: rgba(10, 80, 25, .95);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 850;
      font-size: 13px;
      margin-top: 10px;
      display:none;
    }

    .kv{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 12px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.85);
      border-radius: 14px;
      font-size: 13.5px;
      font-weight: 800;
      margin-top: 8px;
    }
    .kv span:first-child{ color: rgba(11,18,32,.60); font-weight: 850; }
    .kv strong{ font-weight: 950; color: rgba(11,18,32,.92); }

    .box{
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.85);
      border-radius: 16px;
      padding: 12px;
      margin-top: 10px;
    }
    .box h3{
      margin:0 0 6px;
      font-size: 13.5px;
      font-weight: 950;
    }
    .box p{
      margin:0;
      color: rgba(11,18,32,.70);
      font-size: 13px;
      font-weight: 750;
    }

    .file{
      border: 1px dashed rgba(15,23,42,.22);
      background: rgba(15,23,42,.03);
      border-radius: 16px;
      padding: 12px;
      margin-top: 10px;
    }
    .file strong{ font-weight: 950; }
    .file .mini{ margin-top: 6px; }

    .file-list{
      margin-top: 8px;
      display:grid;
      gap: 6px;
      font-size: 13px;
      font-weight: 800;
      color: rgba(11,18,32,.72);
    }
    .file-item{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.85);
    }

    .actions{
      margin-top: 12px;
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }

    .muted-note{
      margin-top: 10px;
      font-size: 12px;
      font-weight: 800;
      color: rgba(11,18,32,.55);
    }

    /* Print */
    @media print{
      header, .no-print{ display:none !important; }
      body{ background:#fff; }
      main{ padding:0; }
      .shell{ box-shadow:none; border:none; background:#fff; }
      .grid{ grid-template-columns: 1fr; padding: 0; }
      .card{ box-shadow:none; border: 1px solid #e5e7eb; }
    }

    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
      .form{ grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <header>
    <div class="container nav">
      <a class="brand" href="../index.html">
        <div class="logo">PW</div>
        <div>
          <strong>PalmWeb</strong>
          <span>Lead Intake Tool (Demo)</span>
        </div>
      </a>

      <div class="row no-print">
        <a class="btn btn-outline" href="../index.html">Back to PalmWeb</a>
        <button class="btn btn-primary" id="printBtn" type="button">Print / Save PDF</button>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <div class="shell">
        <div class="head">
          <div class="row" style="justify-content:space-between;">
            <div>
              <h1>Lead Intake</h1>
              <p class="lead">
                Smart intake form with conditional fields, validation, attachments, and a routing-style summary that’s print-ready.
                Demo only (front-end) — can connect to email/CRM later.
              </p>
            </div>
            <div class="row no-print" style="justify-content:flex-end;">
              <span class="pill">Conditional Fields</span>
              <span class="pill">Validation</span>
              <span class="pill">Print Output</span>
            </div>
          </div>
        </div>

        <div class="grid">
          <!-- Left: Intake Form -->
          <section class="card">
            <h2>Intake Form</h2>
            <div class="mini">Complete the form and click “Generate Summary”.</div>

            <div id="warn" class="warn"></div>
            <div id="ok" class="ok"></div>

            <div class="form">
              <label class="full">
                Service Type*
                <select id="serviceType" required>
                  <option value="">Select…</option>
                  <option value="website">Website (New / Redesign)</option>
                  <option value="maintenance">Website Maintenance</option>
                  <option value="automation">Automation / Integration</option>
                  <option value="domain">Domain / Email Migration</option>
                  <option value="consulting">Consulting</option>
                </select>
              </label>

              <label>
                Business Name*
                <input id="biz" placeholder="Example: Smith & Sons Plumbing" />
              </label>

              <label>
                Contact Name*
                <input id="name" placeholder="Full name" />
              </label>

              <label>
                Email*
                <input id="email" type="email" placeholder="you@company.com" />
              </label>

              <label>
                Phone*
                <input id="phone" type="tel" placeholder="(401) 555-1234" />
              </label>

              <label class="full">
                Location (city/state)
                <input id="location" placeholder="Example: Warwick, RI" />
              </label>

              <label class="full">
                Preferred Contact Method
                <select id="preferred">
                  <option value="">Select…</option>
                  <option>Email</option>
                  <option>Phone</option>
                  <option>Text</option>
                </select>
              </label>
            </div>

            <div class="sep"></div>

            <h2 style="margin-top:0;">Project Needs</h2>

            <div class="chips">
              <label class="chip"><input id="needUrgent" type="checkbox" /> Urgent timeline</label>
              <label class="chip"><input id="needBudget" type="checkbox" /> Has budget range</label>
              <label class="chip"><input id="needDecision" type="checkbox" /> Decision maker</label>
              <label class="chip"><input id="needExisting" type="checkbox" /> Has existing site</label>
              <label class="chip"><input id="needAssets" type="checkbox" /> Has logo/photos</label>
            </div>

            <div class="form">
              <label class="full">
                Goal / What’s the main outcome?*
                <select id="goal">
                  <option value="">Select…</option>
                  <option>More calls / leads</option>
                  <option>Bookings / appointments</option>
                  <option>Professional credibility</option>
                  <option>Show services + pricing</option>
                  <option>Sell products online</option>
                  <option>Other</option>
                </select>
              </label>

              <label class="full">
                Notes / Details
                <textarea id="notes" placeholder="Any context, requirements, examples, pages needed, etc."></textarea>
              </label>
            </div>

            <!-- Conditional blocks -->
            <div id="blockWebsite" style="display:none;">
              <div class="sep"></div>
              <h2 style="margin-top:0;">Website Details</h2>

              <div class="form">
                <label class="full">
                  Current website URL (if any)
                  <input id="currentUrl" placeholder="https://yourwebsite.com" />
                </label>

                <label>
                  Pages needed
                  <select id="pages">
                    <option value="">Select…</option>
                    <option>1–3 pages</option>
                    <option>4–6 pages</option>
                    <option>7–10 pages</option>
                    <option>10+ pages</option>
                    <option>Not sure</option>
                  </select>
                </label>

                <label>
                  Platform preference
                  <select id="platform">
                    <option value="">Select…</option>
                    <option>Static HTML (fast + simple)</option>
                    <option>WordPress</option>
                    <option>Shopify</option>
                    <option>Wix/Squarespace</option>
                    <option>Not sure</option>
                  </select>
                </label>

                <label class="full">
                  Style references (optional)
                  <input id="refs" placeholder="Links to sites you like" />
                </label>
              </div>
            </div>

            <div id="blockMaintenance" style="display:none;">
              <div class="sep"></div>
              <h2 style="margin-top:0;">Maintenance Details</h2>

              <div class="form">
                <label class="full">
                  Website URL*
                  <input id="maintUrl" placeholder="https://yourwebsite.com" />
                </label>

                <label class="full">
                  What needs updating?
                  <textarea id="maintNeeds" placeholder="Example: change homepage text, update hours, add a new service, fix a bug..."></textarea>
                </label>
              </div>
            </div>

            <div id="blockAutomation" style="display:none;">
              <div class="sep"></div>
              <h2 style="margin-top:0;">Automation Details</h2>

              <div class="form">
                <label class="full">
                  Current tools
                  <input id="tools" placeholder="Example: Outlook, Excel, SharePoint, QuickBooks, HubSpot..." />
                </label>

                <label class="full">
                  What should happen automatically?*
                  <textarea id="autoGoal" placeholder="Example: form submission → create record → email confirmation → generate PDF..."></textarea>
                </label>

                <label class="full">
                  Data source (optional)
                  <input id="dataSource" placeholder="Example: shared Excel workbook, SharePoint list, CRM..." />
                </label>
              </div>
            </div>

            <div id="blockDomain" style="display:none;">
              <div class="sep"></div>
              <h2 style="margin-top:0;">Domain / Email Migration</h2>

              <div class="form">
                <label class="full">
                  Domain name*
                  <input id="domain" placeholder="example.com" />
                </label>

                <label class="full">
                  What are you moving?
                  <select id="moving">
                    <option value="">Select…</option>
                    <option>Domain only</option>
                    <option>Email only</option>
                    <option>Website hosting</option>
                    <option>All of the above</option>
                  </select>
                </label>

                <label class="full">
                  Current provider (optional)
                  <input id="provider" placeholder="Example: GoDaddy, Google Domains, Namecheap..." />
                </label>
              </div>
            </div>

            <div id="blockConsulting" style="display:none;">
              <div class="sep"></div>
              <h2 style="margin-top:0;">Consulting</h2>

              <div class="form">
                <label class="full">
                  What do you want help deciding?*
                  <textarea id="consultTopic" placeholder="Example: what platform to use, what pages matter, how to set up intake..."></textarea>
                </label>
              </div>
            </div>

            <!-- Attachments -->
            <div class="sep"></div>
            <h2 style="margin-top:0;">Attachments (optional)</h2>

            <div class="file no-print">
              <div class="row" style="justify-content:space-between;">
                <div>
                  <strong>Upload files</strong>
                  <div class="mini">Demo only (front-end). In production, files would upload to storage and link in CRM/email.</div>
                </div>
                <label class="btn btn-outline" style="cursor:pointer;">
                  Choose files
                  <input id="files" type="file" multiple style="display:none;" />
                </label>
              </div>

              <div id="fileList" class="file-list" style="display:none;"></div>
            </div>

            <div class="actions no-print">
              <div class="row">
                <button class="btn btn-ink" id="generateBtn" type="button">Generate Summary</button>
                <button class="btn btn-outline" id="fillDemoBtn" type="button">Fill Demo</button>
                <button class="btn btn-outline" id="resetBtn" type="button">Reset</button>
              </div>
              <div class="mini">Tip: After generating, print the summary as a PDF.</div>
            </div>

            <div class="muted-note no-print">
              Routing idea: send summary to email/CRM, create a lead record, attach files, assign owner, and set status automatically.
            </div>
          </section>

          <!-- Right: Routing Summary -->
          <aside class="card">
            <h2>Routing Summary</h2>
            <div class="mini">This panel becomes your “handoff” view for email/CRM.</div>

            <div class="kv"><span>Status</span><strong id="sumStatus">Awaiting input</strong></div>
            <div class="kv"><span>Service Type</span><strong id="sumType">—</strong></div>
            <div class="kv"><span>Priority</span><strong id="sumPriority">—</strong></div>

            <div class="sep"></div>

            <div class="kv"><span>Business</span><strong id="sumBiz">—</strong></div>
            <div class="kv"><span>Contact</span><strong id="sumContact">—</strong></div>
            <div class="kv"><span>Email</span><strong id="sumEmail">—</strong></div>
            <div class="kv"><span>Phone</span><strong id="sumPhone">—</strong></div>
            <div class="kv"><span>Location</span><strong id="sumLocation">—</strong></div>
            <div class="kv"><span>Preferred</span><strong id="sumPreferred">—</strong></div>

            <div class="sep"></div>

            <div class="box">
              <h3>Goal</h3>
              <p id="sumGoal">—</p>
            </div>

            <div class="box">
              <h3>Key Notes</h3>
              <p id="sumNotes">—</p>
            </div>

            <div class="box">
              <h3>Conditional Details</h3>
              <p id="sumDetails">—</p>
            </div>

            <div class="box">
              <h3>Attachments</h3>
              <p id="sumFiles">—</p>
            </div>

            <div class="row no-print" style="margin-top:12px; justify-content:space-between;">
              <button class="btn btn-primary" id="printBtn2" type="button">Print / Save PDF</button>
              <a class="btn btn-outline" href="../tools/payment.html">Payment Portal</a>
            </div>
          </aside>
        </div>
      </div>
    </div>
  </main>

  <script>
    const $ = (id) => document.getElementById(id);

    const warn = $("warn");
    const ok = $("ok");

    const serviceType = $("serviceType");

    const blocks = {
      website: $("blockWebsite"),
      maintenance: $("blockMaintenance"),
      automation: $("blockAutomation"),
      domain: $("blockDomain"),
      consulting: $("blockConsulting"),
    };

    function showMsg(el, msg){
      el.style.display = "";
      el.textContent = msg;
    }
    function hideMsg(el){
      el.style.display = "none";
      el.textContent = "";
    }

    function setBlocks(type){
      Object.values(blocks).forEach(b => b.style.display = "none");
      if(blocks[type]) blocks[type].style.display = "";
    }

    function normalizePhone(p){
      return p.replace(/[^\d]/g,"");
    }

    function isValidEmail(email){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.trim());
    }

    function required(id, label){
      const v = $(id).value.trim();
      if(!v) return `${label} is required.`;
      return null;
    }

    function validate(){
      hideMsg(warn);
      hideMsg(ok);

      const errs = [];
      const type = serviceType.value;

      const biz = $("biz").value.trim();
      const name = $("name").value.trim();
      const email = $("email").value.trim();
      const phone = $("phone").value.trim();
      const goal = $("goal").value.trim();

      if(!type) errs.push("Service Type is required.");
      if(!biz) errs.push("Business Name is required.");
      if(!name) errs.push("Contact Name is required.");
      if(!email) errs.push("Email is required.");
      if(email && !isValidEmail(email)) errs.push("Email format looks incorrect.");
      if(!phone) errs.push("Phone is required.");
      if(phone && normalizePhone(phone).length < 10) errs.push("Phone should have at least 10 digits.");
      if(!goal) errs.push("Goal is required.");

      // Conditional required fields
      if(type === "maintenance"){
        const e = required("maintUrl","Website URL");
        if(e) errs.push(e);
      }
      if(type === "automation"){
        const e = required("autoGoal","What should happen automatically");
        if(e) errs.push(e);
      }
      if(type === "domain"){
        const e = required("domain","Domain name");
        if(e) errs.push(e);
      }
      if(type === "consulting"){
        const e = required("consultTopic","Consulting topic");
        if(e) errs.push(e);
      }

      if(errs.length){
        showMsg(warn, errs[0]);
        return false;
      }

      showMsg(ok, "Looks good. Summary generated below.");
      return true;
    }

    function typeLabel(val){
      const map = {
        website: "Website (New / Redesign)",
        maintenance: "Website Maintenance",
        automation: "Automation / Integration",
        domain: "Domain / Email Migration",
        consulting: "Consulting",
      };
      return map[val] || "—";
    }

    function priority(){
      // Simple demo scoring
      const score =
        ($("needUrgent").checked ? 2 : 0) +
        ($("needDecision").checked ? 1 : 0) +
        ($("needBudget").checked ? 1 : 0);

      if(score >= 3) return "High";
      if(score === 2) return "Medium";
      return "Normal";
    }

    function detailsSummary(type){
      if(type === "website"){
        const parts = [];
        const url = $("currentUrl").value.trim();
        const pages = $("pages").value.trim();
        const platform = $("platform").value.trim();
        const refs = $("refs").value.trim();

        if(url) parts.push(`Current site: ${url}`);
        if(pages) parts.push(`Pages: ${pages}`);
        if(platform) parts.push(`Platform: ${platform}`);
        if(refs) parts.push(`References: ${refs}`);
        return parts.length ? parts.join(" • ") : "—";
      }

      if(type === "maintenance"){
        const url = $("maintUrl").value.trim();
        const needs = $("maintNeeds").value.trim();
        const parts = [];
        if(url) parts.push(`Site: ${url}`);
        if(needs) parts.push(`Needs: ${needs}`);
        return parts.length ? parts.join(" • ") : "—";
      }

      if(type === "automation"){
        const tools = $("tools").value.trim();
        const autoGoal = $("autoGoal").value.trim();
        const ds = $("dataSource").value.trim();
        const parts = [];
        if(tools) parts.push(`Tools: ${tools}`);
        if(autoGoal) parts.push(`Automation: ${autoGoal}`);
        if(ds) parts.push(`Data: ${ds}`);
        return parts.length ? parts.join(" • ") : "—";
      }

      if(type === "domain"){
        const dom = $("domain").value.trim();
        const moving = $("moving").value.trim();
        const provider = $("provider").value.trim();
        const parts = [];
        if(dom) parts.push(`Domain: ${dom}`);
        if(moving) parts.push(`Move: ${moving}`);
        if(provider) parts.push(`Provider: ${provider}`);
        return parts.length ? parts.join(" • ") : "—";
      }

      if(type === "consulting"){
        const topic = $("consultTopic").value.trim();
        return topic ? topic : "—";
      }

      return "—";
    }

    function fileNames(){
      const input = $("files");
      const files = Array.from(input.files || []);
      if(!files.length) return [];
      return files.map(f => f.name);
    }

    function renderFiles(){
      const list = $("fileList");
      const names = fileNames();

      if(!names.length){
        list.style.display = "none";
        list.innerHTML = "";
        return;
      }

      list.style.display = "";
      list.innerHTML = names.map(n => `
        <div class="file-item">
          <div>${n}</div>
          <div class="mini">Selected</div>
        </div>
      `).join("");
    }

    function generateSummary(){
      if(!validate()) return;

      const type = serviceType.value;

      $("sumStatus").textContent = "Ready for routing";
      $("sumType").textContent = typeLabel(type);
      $("sumPriority").textContent = priority();

      $("sumBiz").textContent = $("biz").value.trim() || "—";
      $("sumContact").textContent = $("name").value.trim() || "—";
      $("sumEmail").textContent = $("email").value.trim() || "—";
      $("sumPhone").textContent = $("phone").value.trim() || "—";
      $("sumLocation").textContent = $("location").value.trim() || "—";
      $("sumPreferred").textContent = $("preferred").value.trim() || "—";

      $("sumGoal").textContent = $("goal").value.trim() || "—";
      $("sumNotes").textContent = ($("notes").value.trim() || "—");
      $("sumDetails").textContent = detailsSummary(type);

      const names = fileNames();
      $("sumFiles").textContent = names.length ? names.join(", ") : "—";
    }

    function resetAll(){
      hideMsg(warn);
      hideMsg(ok);

      // Clear inputs
      document.querySelectorAll("input, textarea, select").forEach(el => {
        if(el.type === "checkbox") el.checked = false;
        else if(el.type === "file") el.value = "";
        else el.value = "";
      });

      // Reset blocks
      setBlocks("");

      // Reset summary
      $("sumStatus").textContent = "Awaiting input";
      $("sumType").textContent = "—";
      $("sumPriority").textContent = "—";
      $("sumBiz").textContent = "—";
      $("sumContact").textContent = "—";
      $("sumEmail").textContent = "—";
      $("sumPhone").textContent = "—";
      $("sumLocation").textContent = "—";
      $("sumPreferred").textContent = "—";
      $("sumGoal").textContent = "—";
      $("sumNotes").textContent = "—";
      $("sumDetails").textContent = "—";
      $("sumFiles").textContent = "—";

      renderFiles();
    }

    function fillDemo(){
      resetAll();

      serviceType.value = "automation";
      setBlocks("automation");

      $("biz").value = "Smith & Sons Plumbing";
      $("name").value = "Jordan Smith";
      $("email").value = "jordan@smithsonsplumbing.com";
      $("phone").value = "(401) 555-1234";
      $("location").value = "Warwick, RI";
      $("preferred").value = "Email";

      $("needUrgent").checked = true;
      $("needDecision").checked = true;
      $("needBudget").checked = true;

      $("goal").value = "More calls / leads";
      $("notes").value = "Need a simple intake → auto-email summary → spreadsheet log. Also want a PDF quote generated from line items.";

      $("tools").value = "Outlook, Excel, SharePoint";
      $("autoGoal").value = "When a lead form is submitted, create a SharePoint list item, send an email confirmation, and generate a PDF summary.";
      $("dataSource").value = "Shared Excel workbook + SharePoint list";

      generateSummary();
    }

    // Events
    serviceType.addEventListener("change", () => setBlocks(serviceType.value));
    $("files").addEventListener("change", renderFiles);

    $("generateBtn").addEventListener("click", generateSummary);
    $("resetBtn").addEventListener("click", resetAll);
    $("fillDemoBtn").addEventListener("click", fillDemo);

    $("printBtn").addEventListener("click", () => window.print());
    $("printBtn2").addEventListener("click", () => window.print());

    // Init
    setBlocks("");
    renderFiles();
  </script>
</body>
</html>
